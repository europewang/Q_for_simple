# EMA交叉点半年期回测分析

## 项目概述

本项目对ETHUSDT交易对进行EMA9/EMA26交叉点的半年期回测分析，时间范围从2023年1月1日到2025年10月15日，共分析6个半年期时间段。

## 分析时间段

1. **2023年上半年** (2023-01-01 到 2023-06-30)
2. **2023年下半年** (2023-07-01 到 2023-12-31)
3. **2024年上半年** (2024-01-01 到 2024-06-30)
4. **2024年下半年** (2024-07-01 到 2024-12-31)
5. **2025年上半年** (2025-01-01 到 2025-06-30)
6. **2025年下半年** (2025-07-01 到 2025-10-15)

## 主要功能

- **数据获取**: 从Binance API获取30分钟K线数据
- **EMA计算**: 计算EMA9和EMA26指标
- **交叉点识别**: 自动识别金叉和死叉信号
- **突兀点分析**: 识别价格差值超过均值两倍的异常交叉点
- **分期分析**: 按半年期分别进行独立分析
- **可视化**: 为每个时间段生成大尺寸图表(20x16英寸)，包含突兀点标记和差值标注
- **数据导出**: 保存详细的交叉点数据到CSV文件
- **总结报告**: 生成Markdown格式的分析总结

## 分析结果概览

| 时间段 | 总交叉点 | 金叉 | 死叉 | 图表文件 |
|--------|----------|------|------|----------|
| 2023年上半年 | 380 | 190 | 190 | ema_analysis_20231半.png |
| 2023年下半年 | 401 | 201 | 200 | ema_analysis_20232半.png |
| 2024年上半年 | 350 | 175 | 175 | ema_analysis_20241半.png |
| 2024年下半年 | 356 | 178 | 178 | ema_analysis_20242半.png |
| 2025年上半年 | 372 | 186 | 186 | ema_analysis_20251半.png |
| 2025年下半年 | 192 | 96 | 96 | ema_analysis_20252半_to2025-10-15.png |

**总计**: 2051 个交叉点 (1026 金叉, 1025 死叉)

## 文件结构

```
period_analysis/
├── README.md                           # 本文档
├── backtest_summary_report.md          # 详细分析总结报告
├── ema_analysis_20231半.png            # 2023年上半年图表
├── ema_analysis_20232半.png            # 2023年下半年图表
├── ema_analysis_20241半.png            # 2024年上半年图表
├── ema_analysis_20242半.png            # 2024年下半年图表
├── ema_analysis_20251半.png            # 2025年上半年图表
├── ema_analysis_20252半_to2025-10-15.png # 2025年下半年图表
├── ema_results_20231半.csv             # 2023年上半年数据
├── ema_results_20232半.csv             # 2023年下半年数据
├── ema_results_20241半.csv             # 2024年上半年数据
├── ema_results_20242半.csv             # 2024年下半年数据
├── ema_results_20251半.csv             # 2025年上半年数据
└── ema_results_20252半_to2025-10-15.csv # 2025年下半年数据
```

## 图表说明

每个时间段的图表包含两个子图：

### 上图：交叉点序号 vs 价格差值绝对值
- **X轴**: 交叉点的序号（按时间顺序）
- **Y轴**: 当前交叉点与前一交叉点的价格差值绝对值
- **蓝色折线**: 连接所有交叉点的价格差值变化趋势
- **红色点**: 金叉（EMA9上穿EMA26）
- **绿色点**: 死叉（EMA9下穿EMA26）
- **紫色水平线**: 平均值分界线
- **黄色星形点**: 突兀点（价格差值超过均值两倍的点）
- **黄色标注框**: 突兀点间的序号差值（Δx），标注在突兀点右上角
- **橙色虚线**: 趋势线

### 下图：时间 vs 价格差值绝对值
- **X轴**: 从期间开始的天数
- **Y轴**: 当前交叉点与前一交叉点的价格差值绝对值
- **蓝色折线**: 连接所有交叉点的价格差值变化趋势
- **红色点**: 金叉
- **绿色点**: 死叉
- **紫色水平线**: 平均值分界线
- **黄色星形点**: 突兀点（价格差值超过均值两倍的点）
- **黄色标注框**: 突兀点间的时间差值（Δt），标注在突兀点右上角
- **橙色虚线**: 趋势线

## 数据文件说明

CSV文件包含以下列：
- `sequence`: 交叉点序号
- `open_time`: 交叉点发生时间
- `close`: 交叉点价格
- `ema9`: EMA9值
- `ema26`: EMA26值
- `crossover_type`: 交叉类型（金叉/死叉）
- `price_diff_abs`: 与前一交叉点的价格差值绝对值

## 技术参数

- **交易对**: ETHUSDT
- **K线周期**: 30分钟
- **EMA周期**: 9期和26期
- **数据源**: Binance API
- **图表尺寸**: 20x16英寸，300 DPI
- **字体**: WenQuanYi中文字体

## 使用方法

1. 确保已安装依赖包：
   ```bash
   pip install requests pandas numpy matplotlib
   ```

2. 运行分析脚本：
   ```bash
   python ema_backtest_periods.py
   ```

3. 查看生成的图表和数据文件

## 注意事项

- 数据获取需要网络连接
- 大时间跨度分析可能需要较长时间
- 图表文件较大，适合高分辨率显示
- 第一个交叉点的价格差值设为0（因为没有前一个交叉点）

## 自定义选项

可以通过修改脚本中的参数来自定义分析：
- 修改交易对（symbol）
- 修改K线周期（interval）
- 修改EMA周期
- 修改时间范围
- 修改图表样式和尺寸